<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Osano Implementation Review</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Jost:wght@400;700&family=Lato:wght@400;700&display=swap');

    body {
      font-family: 'Lato', sans-serif;
      max-width: 1000px;
      margin: auto;
      padding: 30px;
      background: #F0E7FA;
      color: #0E0416;
    }

    h1, h2, h3 {
      font-family: 'Jost', sans-serif;
      color: #7A3FF1;
    }

    .question {
      margin: 20px 0;
      padding: 15px;
      border-left: 6px solid #ccc;
      border-radius: 6px;
      background: #ffffff;
    }

    .high-risk { border-color: #F04438; background: #FFE5E5; }
    .medium-risk { border-color: #F79009; background: #FFF5E5; }
    .low-risk { border-color: #12B76A; background: #E5FFE5; }

    label { display: block; margin: 5px 0; }
    button {
      padding: 12px 24px;
      font-size: 16px;
      background-color: #7A3FF1;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 20px;
    }

    .report {
      background: #fff;
      border-left: 6px solid #7A3FF1;
      padding: 25px;
      margin-top: 40px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.08);
    }

    .report ul { padding-left: 20px; }
    .risk-high { color: #F04438; font-weight: bold; }
    .risk-medium { color: #F79009; font-weight: bold; }
    .risk-low { color: #12B76A; font-weight: bold; }
  </style>
</head>
<body>
  <h1>Osano Implementation Self-Review</h1>
  <p>Select answers for each implementation best practice question below. At the end, you'll receive a customized report with prioritized recommendations you can export to PDF.</p>
  <form id="reviewForm">
    <h2>CMP Installation Review</h2>
    <div class="question high-risk">
      <strong>Is osano.js placed in the &lt;head&gt; without async/defer?</strong>
      <label><input type="radio" name="headScript" value="yes"> Yes</label>
      <label><input type="radio" name="headScript" value="no"> No</label>
    </div>
    <div class="question high-risk">
      <strong>Are any non-essential scripts running before Osano?</strong>
      <label><input type="radio" name="preScripts" value="yes"> Yes</label>
      <label><input type="radio" name="preScripts" value="no"> No</label>
    </div>
    <div class="question low-risk">
      <strong>Has the CMP been republished in the last 1â€“3 months?</strong>
      <label><input type="radio" name="republish" value="yes"> Yes</label>
      <label><input type="radio" name="republish" value="no"> No</label>
    </div>

    <h2>Classification & Rule Quality</h2>
    <div class="question high-risk">
      <strong>Are all scripts and cookies properly classified?</strong>
      <label><input type="radio" name="classified" value="yes"> Yes</label>
      <label><input type="radio" name="classified" value="no"> No</label>
    </div>
    <div class="question medium-risk">
      <strong>Are classifications grouped into useful categories (e.g. Analytics, Marketing)?</strong>
      <label><input type="radio" name="groupedCategories" value="yes"> Yes</label>
      <label><input type="radio" name="groupedCategories" value="no"> No</label>
    </div>
    <div class="question high-risk">
      <strong>Are there any mass misclassifications (e.g. all hidden or all essential)?</strong>
      <label><input type="radio" name="misclassified" value="yes"> Yes</label>
      <label><input type="radio" name="misclassified" value="no"> No</label>
    </div>

    <h2>Regulatory Settings</h2>
    <div class="question high-risk">
      <strong>Is US State Opt-Out turned OFF (required for CPRA)?</strong>
      <label><input type="radio" name="usOptOut" value="yes"> Yes</label>
      <label><input type="radio" name="usOptOut" value="no"> No</label>
    </div>
    <div class="question high-risk">
      <strong>Is GPC (Global Privacy Control) enabled?</strong>
      <label><input type="radio" name="gpc" value="yes"> Yes</label>
      <label><input type="radio" name="gpc" value="no"> No</label>
    </div>
    <div class="question low-risk">
      <strong>Is DNT (Do Not Track) enabled?</strong>
      <label><input type="radio" name="dnt" value="yes"> Yes</label>
      <label><input type="radio" name="dnt" value="no"> No</label>
    </div>
    <div class="question medium-risk">
      <strong>Is the Manage Preferences button enabled?</strong>
      <label><input type="radio" name="managePreferences" value="yes"> Yes</label>
      <label><input type="radio" name="managePreferences" value="no"> No</label>
    </div>

    <h2>DSAR & Footer Elements</h2>
    <div class="question high-risk">
      <strong>Is a DSAR form present and accessible?</strong>
      <label><input type="radio" name="dsarForm" value="yes"> Yes</label>
      <label><input type="radio" name="dsarForm" value="no"> No</label>
    </div>
    <div class="question medium-risk">
      <strong>Is the DSAR form linked in the privacy policy?</strong>
      <label><input type="radio" name="dsarLink" value="yes"> Yes</label>
      <label><input type="radio" name="dsarLink" value="no"> No</label>
    </div>
    <div class="question high-risk">
      <strong>Does the DSAR form offer full rights (access, deletion, correction, portability, objection)?</strong>
      <label><input type="radio" name="dsarRights" value="yes"> Yes</label>
      <label><input type="radio" name="dsarRights" value="no"> No</label>
    </div>
    <div class="question high-risk">
      <strong>Is there a visible "Do Not Sell" link in the footer?</strong>
      <label><input type="radio" name="dnsLink" value="yes"> Yes</label>
      <label><input type="radio" name="dnsLink" value="no"> No</label>
    </div>
    <div class="question high-risk">
      <strong>Is there a visible cookie preferences link or widget?</strong>
      <label><input type="radio" name="cookieLink" value="yes"> Yes</label>
      <label><input type="radio" name="cookieLink" value="no"> No</label>
    </div>

    <button type="button" onclick="generateReport()">Generate Report</button>
  </form>

  <div id="report" class="report" style="display:none;"></div>
  <button id="downloadBtn" style="display:none; margin-top:10px;">Download as PDF</button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    function generateReport() {
      const form = document.forms.reviewForm;
      const report = document.getElementById('report');
      const downloadBtn = document.getElementById('downloadBtn');
      let html = '<h2>Implementation Review Report</h2><p>Below is a summary of issues found during the review with actionable recommendations:</p><ul>';

      const checks = [
        {name: 'headScript', text: 'Place osano.js in the <head> and remove async/defer.', risk: 'high'},
        {name: 'preScripts', text: 'Block all non-essential scripts until consent is obtained.', risk: 'high'},
        {name: 'republish', text: 'Republish CMP regularly to apply latest settings.', risk: 'low'},
        {name: 'classified', text: 'Ensure all scripts and cookies are properly classified.', risk: 'high'},
        {name: 'groupedCategories', text: 'Organize scripts into meaningful categories (e.g., Marketing, Analytics).', risk: 'medium'},
        {name: 'misclassified', text: 'Avoid defaulting all scripts to "Essential" or "Hidden".', risk: 'high'},
        {name: 'usOptOut', text: 'Turn OFF US State Opt-Out to comply with CPRA opt-in.', risk: 'high'},
        {name: 'gpc', text: 'Enable GPC to respect browser privacy signals.', risk: 'high'},
        {name: 'dnt', text: 'Enable DNT as a best practice.', risk: 'low'},
        {name: 'managePreferences', text: 'Enable Manage Preferences for transparency.', risk: 'medium'},
        {name: 'dsarForm', text: 'Add a DSAR form and link it from prominent locations.', risk: 'high'},
        {name: 'dsarLink', text: 'Include DSAR link in the Privacy Policy.', risk: 'medium'},
        {name: 'dsarRights', text: 'Ensure DSAR form supports full rights: access, deletion, correction, etc.', risk: 'high'},
        {name: 'dnsLink', text: 'Add a clear Do Not Sell link in the footer.', risk: 'high'},
        {name: 'cookieLink', text: 'Provide a visible cookie preferences widget or link.', risk: 'high'}
      ];

      checks.forEach(({name, text, risk}) => {
        const value = form[name]?.value;
        if (value === 'no') {
          const label = risk === 'high' ? 'risk-high' : risk === 'medium' ? 'risk-medium' : 'risk-low';
          html += `<li><span class="${label}">${risk.toUpperCase()}:</span> ${text}</li>`;
        }
      });

      html += '</ul>';
      report.innerHTML = html;
      report.style.display = 'block';
      downloadBtn.style.display = 'inline-block';
    }

    document.getElementById('downloadBtn').addEventListener('click', () => {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.html(document.getElementById('report'), {
        callback: function (pdf) {
          pdf.save('osano-review-report.pdf');
        },
        x: 10,
        y: 10
      });
    });
  </script>
</body>
</html>
